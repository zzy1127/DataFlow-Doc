<!doctype html><html lang="en-US"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.23" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.155" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><link rel="icon" type="image/png" href="/DataFlow-01.png"><title>General Data Evaluation Operators | DataFlow Documentation</title><meta name="description" content="Documentation for modern data processing pipeline."><link rel="preload" href="/DataFlow-Doc/assets/style-db4TmxRD.css" as="style"><link rel="stylesheet" href="/DataFlow-Doc/assets/style-db4TmxRD.css"><link rel="modulepreload" href="/DataFlow-Doc/assets/app-BqDkFDvD.js"><link rel="modulepreload" href="/DataFlow-Doc/assets/index.html-BQGQGcjW.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-d90a7a26><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d5a8d0bc></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-d5a8d0bc> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-d90a7a26 data-v-e98a6132><div class="vp-navbar" vp-navbar data-v-e98a6132 data-v-2c31ea5e><div class="wrapper" data-v-2c31ea5e><div class="container" data-v-2c31ea5e><div class="title" data-v-2c31ea5e><div class="vp-navbar-title has-sidebar" data-v-2c31ea5e data-v-1a4f50af><a class="vp-link link no-icon title" href="/DataFlow-Doc/en/" data-v-1a4f50af><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/DataFlow-Doc/DataFlow-02.png" alt data-v-480e858a><!--]--><!--[--><img class="vp-image light logo" style="" src="/DataFlow-Doc/DataFlow-01.png" alt data-v-480e858a><!--]--><!--]--><!--]--><span data-v-1a4f50af>DataFlow Documentation</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-2c31ea5e><div class="content-body" data-v-2c31ea5e><!--[--><!--]--><div class="vp-navbar-search search" data-v-2c31ea5e><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="Search" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">Search</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-2c31ea5e data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>Guide</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-group" data-v-709dc2b1 data-v-c497e9e3><p class="title" data-v-c497e9e3><!----><span data-v-c497e9e3>Basic Info</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/intro/basicinfo/intro/" data-v-1ff1855f><!--[--><!----> Introduction <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/basicinfo/framework/" data-v-1ff1855f><!--[--><!----> Framework Design <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="vp-menu-group" data-v-709dc2b1 data-v-c497e9e3><p class="title" data-v-c497e9e3><!----><span data-v-c497e9e3>Start with Dataflow</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/install/" data-v-1ff1855f><!--[--><!----> Installation <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/quickstart/" data-v-1ff1855f><!--[--><!----> Quick Start <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/translation/" data-v-1ff1855f><!--[--><!----> Case: PromptedGenerator <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/j95zcdmj/" data-v-1ff1855f><!--[--><!----> Case: Batch PDF Extracting <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="vp-menu-group" data-v-709dc2b1 data-v-c497e9e3><p class="title" data-v-c497e9e3><!----><span data-v-c497e9e3>Pipelines</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/textpipeline/" data-v-1ff1855f><!--[--><!----> Text Pipeline <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/reasoningpipeline/" data-v-1ff1855f><!--[--><!----> Reasoning Pipeline <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/text2sqlpipeline/" data-v-1ff1855f><!--[--><!----> Text-to-SQL Pipeline <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/doc2qa_pipeline/" data-v-1ff1855f><!--[--><!----> Doc-to-QA Pipeline <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/agenticrag_pipeline/" data-v-1ff1855f><!--[--><!----> Agentic RAG Pipeline <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/rare_pipeline/" data-v-1ff1855f><!--[--><!----> RARE Pipeline <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/r51ooua8/" data-v-1ff1855f><!--[--><!----> Knowledge Base Cleaning Pipeline <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/en/guide/e6kz1s79/" data-v-1ff1855f><!--[--><!----> Function Calling Data Synthesis Pipeline <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/DataFlow-Doc/en/api/home/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>API Reference</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/DataFlow-Doc/en/dev_guide/index_guide/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>Developer Guide</span><!----><!--]--><!----></a><!--]--><!--]--></nav><!--[--><!--]--><div class="vp-flyout vp-navbar-translations translations" data-v-2c31ea5e data-v-7aeea4e2 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Languages" data-v-86530b6c><span class="text" data-v-86530b6c><!----><span class="vpi-languages option-icon" data-v-86530b6c></span><!----><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><div class="items" data-v-7aeea4e2><p class="title" data-v-7aeea4e2>English</p><!--[--><div class="vp-menu-link" data-v-7aeea4e2 data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/zh/guide/text_evaluation_operators/" data-v-1ff1855f><!--[--><!----> 简体中文 <!----><!--]--><!----></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="vp-navbar-appearance appearance" data-v-2c31ea5e data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-2c31ea5e data-v-ad52545c data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/Open-DataFlow/DataFlow" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-2c31ea5e data-v-652282fd data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-86530b6c><span class="vpi-more-horizontal icon" data-v-86530b6c></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><div class="group translations" data-v-652282fd><p class="trans-title" data-v-652282fd>English</p><!--[--><div class="vp-menu-link" data-v-652282fd data-v-1ff1855f><a class="vp-link link" href="/DataFlow-Doc/zh/guide/text_evaluation_operators/" data-v-1ff1855f><!--[--><!----> 简体中文 <!----><!--]--><!----></a></div><!--]--></div><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>Appearance</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-652282fd><div class="item social-links" data-v-652282fd><div class="vp-social-links social-links-list" data-v-652282fd data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/Open-DataFlow/DataFlow" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-2c31ea5e data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-2c31ea5e><div class="divider-line" data-v-2c31ea5e></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-d90a7a26 data-v-3944d8e8><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-3944d8e8><span class="vpi-align-left menu-icon" data-v-3944d8e8></span><span class="menu-text" data-v-3944d8e8>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-3944d8e8 data-v-4114a62c><button data-v-4114a62c>Return to top</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-d90a7a26 data-v-95211354><div class="curtain" data-v-95211354></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-95211354><span id="sidebar-aria-label" class="visually-hidden" data-v-95211354> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>Basic Info</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/intro/basicinfo/intro/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Introduction</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/basicinfo/framework/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Framework Design</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>Start with Dataflow</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/install/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Installation</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/quickstart/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Quick Start</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>Start Case</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/translation/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 1. Translation/QA Generation/Abbreviation</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/sft_synthesis/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 2. SFT Data Synthesis</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/conversation_synthesis/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 3. Synthesizing Multi-turn Dialogue Data from Scratch</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/reasoning_general/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 4. Synthesis and Processing of General Reasoning Data</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/l4872nj0/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 5. Visual Question Answering (VQA)</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/t8ykcw9l/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 6. Math Problem Extraction</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/j95zcdmj/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 7. Private KB cleaning & one-click data generation</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/c9gv10k1/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 8. Quick General Text Evaluation</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/5pdipkiv/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Case 9. Speech transcription</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>Guide for Pipelines</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/textpipeline/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Text Pipeline</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/reasoningpipeline/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Reasoning Data Synthesis Pipeline</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/text2sqlpipeline/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Text-to-SQL Data Synthesis Pipeline</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/doc2qa_pipeline/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Doc-to-QA Data Synthesis Pipeline</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/agenticrag_pipeline/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Agentic RAG Data Synthesis Pipeline</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/rare_pipeline/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>RARE Data Synthesis Pipeline</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/r51ooua8/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Knowledge Base Cleaning Pipeline</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/e6kz1s79/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Function Calling Data Synthesis Pipeline</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>General Operators</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/text_evaluation_operators/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>General Data Evaluation Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/text_process_operators/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>General Data Processing Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/text_generate_operators/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>General Generate Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>Domain-Specific Operators</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/Reasoning_operators/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Reasoning Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/Text2SQL_operators/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Text2SQL Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/RARE_operators/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>RARE Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/Knowledgebase_QA_operators/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Knowledge Base Construction and QA Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/agenticrag_operators/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>AgenticRAG Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/qdq6vy95/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Function Call Data Synthesis Operators</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>Agent for Dataflow</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/agent/agent_for_data/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>DataFlow-Agent Data Preparation</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/DataFlow-AgentPipelineOrchestration/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>Agent-QuickStart</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/DataFlow-Doc/en/guide/agent/agent_for_dataflow_new/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>DataFlow-Agent</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-d90a7a26 data-v-b2beaca7><div class="vp-doc-container has-sidebar has-aside" data-v-b2beaca7 data-v-23f6ad98><!--[--><!--]--><div class="container" data-v-23f6ad98><div class="aside" vp-outline data-v-23f6ad98><div class="aside-curtain" data-v-23f6ad98></div><div class="aside-container" data-v-23f6ad98><div class="aside-content" data-v-23f6ad98><div class="vp-doc-aside" data-v-23f6ad98 data-v-5976474c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-5976474c data-v-aa56eba0><div class="content" data-v-aa56eba0><div class="outline-marker" data-v-aa56eba0></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-aa56eba0><span data-v-aa56eba0>On this page</span><span class="vpi-print icon" data-v-aa56eba0></span></div><ul class="root" data-v-aa56eba0 data-v-3e6b023c><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-5976474c></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-23f6ad98><div class="content-container" data-v-23f6ad98><!--[--><!--]--><main class="main" data-v-23f6ad98><nav class="vp-breadcrumb" data-v-23f6ad98 data-v-1ae4ad7a><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-1ae4ad7a><!--[--><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb" href="/DataFlow-Doc/en/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->Home<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="Home" data-v-1ae4ad7a><meta property="position" content="1" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><span class="vp-link breadcrumb" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->General Operators<!--]--><!----></span><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="General Operators" data-v-1ae4ad7a><meta property="position" content="2" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb current" href="/DataFlow-Doc/en/guide/text_evaluation_operators/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->General Data Evaluation Operators<!--]--><!----></a><!----><meta property="name" content="General Data Evaluation Operators" data-v-1ae4ad7a><meta property="position" content="3" data-v-1ae4ad7a></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-27be53cb>General Data Evaluation Operators <!----></h1><div class="vp-doc-meta" data-v-27be53cb><!--[--><!--]--><p class="reading-time" data-v-27be53cb><span class="vpi-books icon" data-v-27be53cb></span><span data-v-27be53cb>About 7198 words</span><span data-v-27be53cb>About 24 min</span></p><!----><!--[--><!--]--><p class="create-time" data-v-27be53cb><span class="vpi-clock icon" data-v-27be53cb></span><span data-v-27be53cb>2025-06-09</span></p></div><!--]--><!--[--><!--]--><div class="_en_guide_text_evaluation_operators_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-23f6ad98><!--[--><!--]--><div data-v-23f6ad98><h2 id="text-quality-evaluation" tabindex="-1"><a class="header-anchor" href="#text-quality-evaluation"><span>Text quality evaluation</span></a></h2><p>Scorers are divided into the following four types, each scorer provides one or more scores.</p><table class="tg"><thead><tr><th class="tg-0pky">Type</th><th class="tg-0pky">Count</th><th class="tg-0pky">Description</th></tr></thead><tbody><tr><td class="tg-0pky">APIcaller</td><td class="tg-0pky">3</td><td class="tg-0pky">Call API for scoring</td></tr><tr><td class="tg-0pky">Diversity</td><td class="tg-0pky">2</td><td class="tg-0pky">Compute diversity score of the entire dataset</td></tr><tr><td class="tg-0pky">Models</td><td class="tg-0pky">12</td><td class="tg-0pky">Model or classifier-based scoring</td></tr><tr><td class="tg-0pky">Statistics</td><td class="tg-0pky">3</td><td class="tg-0pky">Statistical metric scoring</td></tr></tbody></table><p>Regarding data types: <strong>[Text]</strong> indicates accepting single-field string input, suitable for pre-training or fine-tuning data. <strong>[Instruction]</strong> indicates only suitable for fine-tuning data with multi-field format input.</p><p>The types of open-source operators are quite limited. In order to achieve better data processing quality and fill the gap in data evaluation methods missing in open-source, we have meticulously designed and self-developed a new set of operators. The meanings of the labels are as follows:</p><p>🚀 Independent Innovation: Core algorithms are original developments, filling gaps in existing algorithms or further improving performance, breaking through current performance bottlenecks.</p><p>✨ Open Source Premiere: This operator is integrated into the mainstream community framework for the first time, making it easier for more developers to use and achieve open-source sharing.</p><h3 id="list-of-scorers" tabindex="-1"><a class="header-anchor" href="#list-of-scorers"><span>List of Scorers</span></a></h3><h4 id="apicaller" tabindex="-1"><a class="header-anchor" href="#apicaller"><span>APIcaller</span></a></h4><table class="tg"><thead><tr><th class="tg-0pky">Name</th><th class="tg-0pky">Evaluation Dimension</th><th class="tg-0pky">Data Type</th><th class="tg-0pky">Description</th><th class="tg-0pky">Value Range</th><th class="tg-0pky">Official Repository or Paper</th></tr></thead><tbody><tr><td class="tg-0pky">AlpagasusScorer✨</td><td class="tg-0pky">Content Accuracy &amp; Effectiveness</td><td class="tg-0pky">Instruction</td><td class="tg-0pky">Evaluates the quality of instructions by calling GPT, returning a quality score. A higher score indicates higher instruction quality.</td><td class="tg-0pky">[0, 5]</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2307.08701">paper</a></td></tr><tr><td class="tg-0pky">PerspectiveScorer✨</td><td class="tg-0pky">Safety</td><td class="tg-0pky">Text</td><td class="tg-0pky">Uses PerspectiveAPI to evaluate the toxicity of the text, returning a toxicity probability. A higher score indicates higher text toxicity.</td><td class="tg-0pky">[0, 1]</td><td class="tg-0pky"><a href="https://perspectiveapi.com/">API</a></td></tr><tr><td class="tg-0pky">TreeinstructScorer✨</td><td class="tg-0pky">Diversity &amp; Complexity</td><td class="tg-0pky">Instruction</td><td class="tg-0pky">Measures instruction complexity by generating the number of nodes in the syntax tree; more nodes indicate more complex instructions.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2308.05696">paper</a></td></tr></tbody></table><h4 id="diversity" tabindex="-1"><a class="header-anchor" href="#diversity"><span>Diversity</span></a></h4><table class="tg"><thead><tr><th class="tg-0pky">Name</th><th class="tg-0pky">Evaluation Dimension</th><th class="tg-0pky">Data Type</th><th class="tg-0pky">Description</th><th class="tg-0pky">Value Range</th><th class="tg-0pky">Official Repository or Paper</th></tr></thead><tbody><tr><td class="tg-0pky">Task2VecScorer✨</td><td class="tg-0pky">Diversity &amp; Complexity</td><td class="tg-0pky">Text</td><td class="tg-0pky">Evaluates the diversity of the dataset using the Task2Vec method. Higher scores indicate higher dataset diversity.</td><td class="tg-0pky">[0.0525±3.41E-4, 0.4037±1.932E-5]</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2306.13840">paper</a><br><a href="https://github.com/alycialee/beyond-scale-language-data-diversity">code</a></td></tr><tr><td class="tg-0pky">VendiScorer</td><td class="tg-0pky">Diversity &amp; Complexity</td><td class="tg-0pky">Text</td><td class="tg-0pky">Evaluates dataset diversity by calculating VendiScore; higher scores indicate higher diversity.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2210.02410">paper</a><br><a href="https://github.com/vertaix/Vendi-Score">code</a></td></tr></tbody></table><h4 id="models" tabindex="-1"><a class="header-anchor" href="#models"><span>Models</span></a></h4><table class="tg"><thead><tr><th class="tg-0pky">Name</th><th class="tg-0pky">Evaluation Dimension</th><th class="tg-0pky">Data Type</th><th class="tg-0pky">Description</th><th class="tg-0pky">Value Range</th><th class="tg-0pky">Official Repository or Paper</th></tr></thead><tbody><tr><td class="tg-0pky">DebertaV3Scorer✨</td><td class="tg-0pky">Content Accuracy &amp; Effectiveness</td><td class="tg-0pky">Text</td><td class="tg-0pky">A quality classifier based on NVIDIA&#39;s DeBERTa V3 model for evaluating text quality.</td><td class="tg-0pky">{Low, Medium, High}</td><td class="tg-0pky"><a href="https://huggingface.co/nvidia/quality-classifier-deberta">code</a></td></tr><tr><td class="tg-0pky">FineWebEduScorer✨</td><td class="tg-0pky">Educational Value</td><td class="tg-0pky">Text</td><td class="tg-0pky">A classifier for evaluating the educational value of text; higher scores indicate higher educational value.</td><td class="tg-0pky">[0, 5]</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2406.17557">paper</a><br><a href="https://huggingface.co/HuggingFaceFW/fineweb-edu-classifier">code</a></td></tr><tr><td class="tg-0pky">InstagScorer✨</td><td class="tg-0pky">Diversity &amp; Complexity</td><td class="tg-0pky">Instruction</td><td class="tg-0pky">Evaluates instruction content diversity by returning the number of tags; more tags indicate higher content diversity.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2308.07074">paper</a><br><a href="https://huggingface.co/OFA-Sys/InsTagger">code</a></td></tr><tr><td class="tg-0pky">PerplexityScorer</td><td class="tg-0pky">Fluency &amp; Understandability</td><td class="tg-0pky">Text</td><td class="tg-0pky">Calculates text perplexity using the KenLM model; lower scores indicate higher fluency and understandability.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://aclanthology.org/W11-2123.pdf">paper</a><br><a href="https://huggingface.co/edugp/kenlm/tree/main">code</a></td></tr><tr><td class="tg-0pky">QuratingScorer✨</td><td class="tg-0pky">Content Accuracy &amp; Effectiveness、 Educational Value</td><td class="tg-0pky">Text</td><td class="tg-0pky">Evaluates text quality using the Qurating model; higher scores indicate higher quality.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2402.09739">paper</a><br><a href="https://github.com/princeton-nlp/QuRating">code</a></td></tr><tr><td class="tg-0pky">PairQualScorer🚀</td><td class="tg-0pky">Educational Value</td><td class="tg-0pky">Text</td><td class="tg-0pky">Evaluates the quality of text using the PairQual model, based on the BGE model. It supports both Chinese and English. It is trained by scoring pairwise comparisons of texts using GPT. A higher score indicates better quality.</td><td class="tg-0pky">-</td><td class="tg-0pky"><br><a href="https://huggingface.co/zks2856/PairQual-Scorer-en">code</a></td></tr><tr><td class="tg-0pky">PresidioScorer✨</td><td class="tg-0pky">Safety</td><td class="tg-0pky">Text</td><td class="tg-0pky">Using the Microsoft Presidio model, identify private entities (PII) in text such as credit card numbers, names, locations, etc. The scorer returns the number of PII information.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://github.com/microsoft/presidio">code</a></td></tr><tr><td class="tg-0pky">SuperfilteringScorer✨</td><td class="tg-0pky">Fluency &amp; Understandability</td><td class="tg-0pky">Instruction</td><td class="tg-0pky">Evaluates the following difficulty of instructions using the Superfiltering method; higher scores indicate more difficult instructions to follow.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2402.00530">paper</a><br><a href="https://github.com/tianyi-lab/Superfiltering">code</a></td></tr><tr><td class="tg-0pky">TextbookScorer✨</td><td class="tg-0pky">Educational Value</td><td class="tg-0pky">Text</td><td class="tg-0pky">A textbook quality classifier based on FastText, used to evaluate the educational value of text.</td><td class="tg-0pky">[0, 2]</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2306.11644">paper</a><br><a href="https://huggingface.co/kenhktsui/llm-data-textbook-quality-fasttext-classifier-v2">code</a></td></tr><tr><td class="tg-0pky">DeitaQualityScorer✨</td><td class="tg-0pky">Content Accuracy &amp; Effectiveness</td><td class="tg-0pky">Instruction</td><td class="tg-0pky">An instruction quality scorer based on the Llama model; higher scores indicate higher instruction quality.</td><td class="tg-0pky">[1, 6]</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2312.15685">paper</a><br><a href="https://huggingface.co/hkust-nlp/deita-quality-scorer">code</a></td></tr><tr><td class="tg-0pky">DeitaComplexityScorer✨</td><td class="tg-0pky">Diversity &amp; Complexity</td><td class="tg-0pky">Instruction</td><td class="tg-0pky">An instruction complexity scorer based on the Llama model; higher scores indicate higher instruction complexity.</td><td class="tg-0pky">[1,6]</td><td class="tg-0pky"><a href="https://arxiv.org/abs/2312.15685">paper</a><br><a href="https://huggingface.co/hkust-nlp/deita-complexity-scorer">code</a></td></tr><tr><td class="tg-0pky">RMScorer✨</td><td class="tg-0pky">Fluency &amp; Understandability</td><td class="tg-0pky">指令</td><td class="tg-0pky">A reward-model-deberta-v3-large-v2 scorer based on human value judgment. High scores represent higher quality.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://huggingface.co/OpenAssistant/reward-model-deberta-v3-large-v2">code</a></td></tr></tbody></table><h4 id="statistics" tabindex="-1"><a class="header-anchor" href="#statistics"><span>Statistics</span></a></h4><table class="tg"><thead><tr><th class="tg-0pky">Name</th><th class="tg-0pky">Evaluation Dimension</th><th class="tg-0pky">Data Type</th><th class="tg-0pky">Description</th><th class="tg-0pky">Value Range</th><th class="tg-0pky">Official Repository or Paper</th></tr></thead><tbody><tr><td class="tg-0pky">LangkitScorer</td><td class="tg-0pky">Text Structure, Fluency &amp; Understandability</td><td class="tg-0pky">Text</td><td class="tg-0pky">Calculates statistical information of text using the Langkit toolkit, such as word count, sentence count, syllable count, etc., to help evaluate the structural complexity and readability of the text.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://github.com/whylabs/langkit">code</a></td></tr><tr><td class="tg-0pky">LexicalDiversityScorer✨</td><td class="tg-0pky">Diversity &amp; Complexity</td><td class="tg-0pky">Text</td><td class="tg-0pky">Calculates lexical diversity scores using MTLD and HD-D methods; higher scores represent richer vocabulary use, reflecting the diversity and complexity of the text.</td><td class="tg-0pky">-</td><td class="tg-0pky"><a href="https://link.springer.com/article/10.3758/BRM.42.2.381">paper</a><br><a href="https://github.com/jennafrens/lexical_diversity/tree/master">code</a></td></tr><tr><td class="tg-0pky">NgramScorer</td><td class="tg-0pky">Diversity &amp; Complexity</td><td class="tg-0pky">Text</td><td class="tg-0pky">Calculates the repetition ratio of n-grams in the text to measure text repetition; higher scores indicate lower repetition of n-grams in the text.</td><td class="tg-0pky">[0, 1]</td><td class="tg-0pky">-</td></tr></tbody></table><h3 id="quality-evaluation-system" tabindex="-1"><a class="header-anchor" href="#quality-evaluation-system"><span>Quality Evaluation System</span></a></h3><p>To provide more precise data quality evaluation, we have constructed a quality evaluation system based on existing classifiers. Specifically, the output score metrics of each scorer include the following six dimensions.</p><h4 id="_1-text-structure" tabindex="-1"><a class="header-anchor" href="#_1-text-structure"><span>1. Text Structure</span></a></h4><ul><li><strong>LangkitScorer</strong>: LangkitSentenceCountScore, LangkitCharacterCountScore, LangkitLetterCountScore, LangkitSyllableCountScore, LangkitPolysyllableCountScore, LangkitMonosyllableCountScore, LangkitLexiconCountScore, LangkitDifficultWordsScore</li></ul><h4 id="_2-diversity-complexity" tabindex="-1"><a class="header-anchor" href="#_2-diversity-complexity"><span>2. Diversity &amp; Complexity</span></a></h4><ul><li><strong>LexicalDiversityScorer</strong>: LexicalDiversityMTLDScore, LexicalDiversityHD-DScore</li><li><strong>NgramScorer</strong>: NgramScore</li><li><strong>InstagScorer</strong>: InstagScore</li><li><strong>TreeinstructScorer</strong>: TreeinstructScore</li><li><strong>Task2VecScorer</strong>: Task2VecDiversityScore (ConfidenceInterval)</li><li><strong>VendiScorer</strong>: N-gramsVendiScore, BERTVendiScore, SimCSEVendiScore</li><li><strong>DeitaComplexityScorer:</strong> DeitaComplexityScore</li></ul><h4 id="_3-fluency-understandability" tabindex="-1"><a class="header-anchor" href="#_3-fluency-understandability"><span>3. Fluency &amp; Understandability</span></a></h4><ul><li><strong>LangkitScorer</strong>: LangkitFleschReadingEaseScore, LangkitAutomatedReadabilityIndexScore, LangkitAggregateReadingLevelScore</li><li><strong>PerplexityScorer</strong>: PerplexityScore</li><li><strong>QuratingScorer</strong>: QuratingWritingStyleScore</li><li><strong>SuperfilteringScorer</strong>: SuperfilteringScore</li><li><strong>RMScorer</strong>: RMScore</li></ul><h4 id="_4-safety" tabindex="-1"><a class="header-anchor" href="#_4-safety"><span>4. Safety</span></a></h4><ul><li><strong>PerspectiveScorer</strong>: PerspectiveScore</li><li><strong>PresidioScorer</strong>: PresidioScore</li></ul><h4 id="_5-educational-value" tabindex="-1"><a class="header-anchor" href="#_5-educational-value"><span>5. Educational Value</span></a></h4><ul><li><strong>TextbookScorer</strong>: TextbookScore</li><li><strong>FineWebEduScorer</strong>: FineWebEduScore</li><li><strong>QuratingScorer</strong>: QuratingEducationalValueScore</li><li><strong>PairQualScorer</strong>: PairQualScore</li></ul><h4 id="_6-content-accuracy-effectiveness" tabindex="-1"><a class="header-anchor" href="#_6-content-accuracy-effectiveness"><span>6. Content Accuracy &amp; Effectiveness</span></a></h4><ul><li><strong>QuratingScorer</strong>: QuratingRequiredExpertiseScore, QuratingFactsAndTriviaScore</li><li><strong>DebertaV3Scorer</strong>: DebertaV3Score</li><li><strong>AlpagasusScorer</strong>: AlpagasusScore</li><li><strong>DeitaScorer</strong>: DeitaScore</li></ul><h3 id="benchmark-values" tabindex="-1"><a class="header-anchor" href="#benchmark-values"><span>Benchmark Values</span></a></h3><p>To better provide data quality references, we randomly selected 5k data samples from the currently considered high-quality datasets <a href="https://huggingface.co/datasets/HuggingFaceFW/fineweb" target="_blank" rel="noopener noreferrer">Fineweb</a> and <a href="https://huggingface.co/datasets/yahma/alpaca-cleaned" target="_blank" rel="noopener noreferrer">alpaca-cleaned</a> based on data types, and tested the benchmark values of some scorers.</p><table class="tg"><thead><tr><th class="tg-0pky">Scorer Name</th><th class="tg-0pky">Score Metric Name</th><th class="tg-0pky">Description</th><th class="tg-0pky">Mean</th><th class="tg-0pky">Variance</th><th class="tg-0pky">Max</th><th class="tg-0pky">Min</th></tr></thead><tbody><tr><td class="tg-0pky" rowspan="1">PerspectiveScorer</td><td class="tg-0pky">PerspectiveScore</td><td class="tg-0pky">Evaluates the toxicity of the text, checking for potential insults or inappropriate language. <b>The higher the score, the higher the toxicity</b></td><td class="tg-0pky">0.0426</td><td class="tg-0pky">0.0025</td><td class="tg-0pky">0.2610</td><td class="tg-0pky">0.0026</td></tr><tr><td class="tg-0pky" rowspan="2">LexicalDiversityScorer</td><td class="tg-0pky">LexicalDiversityMTLDScore</td><td class="tg-0pky">Measures the lexical diversity of the text; higher scores indicate more varied vocabulary usage.<b>The higher the score, the higher the lexical diversity</b></td><td class="tg-0pky">100.5990</td><td class="tg-0pky">1625.1318</td><td class="tg-0pky">1165.7164</td><td class="tg-0pky">14.8439</td></tr><tr><td class="tg-0pky">LexicalDiversityHD-DScore</td><td class="tg-0pky">Used to measure the lexical diversity of the text, calculated based on discrete distribution.<b>The higher the score, the higher the lexical diversity</b></td><td class="tg-0pky">0.8487</td><td class="tg-0pky">0.0014</td><td class="tg-0pky">0.9873</td><td class="tg-0pky">0.5570</td></tr><tr><td class="tg-0pky" rowspan="1">NgramScorer</td><td class="tg-0pky">NgramScore</td><td class="tg-0pky">Calculate the repetition ratio of n-grams in the text to measure the degree of repetition. <b>The higher the score, the lower the n-gram repetition.</b></td><td class="tg-0pky">0.9938</td><td class="tg-0pky">0.0002</td><td class="tg-0pky">1.0</td><td class="tg-0pky">0.8285</td></tr><tr><td class="tg-0pky" rowspan="11">LangkitScorer</td><td class="tg-0pky">LangkitFleschReadingEaseScore</td><td class="tg-0pky">Measures Flesch text readability. <b>The higher the score, the easier readability.</b></td><td class="tg-0pky">55.1870</td><td class="tg-0pky">324.8975</td><td class="tg-0pky">106.37</td><td class="tg-0pky">-144.75</td></tr><tr><td class="tg-0pky">LangkitAutomatedReadabilityIndexScore</td><td class="tg-0pky">Automated readability index based on sentence length and vocabulary difficulty.<b>The higher the score, the more difficult readability</b></td><td class="tg-0pky">11.7727</td><td class="tg-0pky">19.4117</td><td class="tg-0pky">98.2</td><td class="tg-0pky">0.9</td></tr><tr><td class="tg-0pky">LangkitAggregateReadingLevelScore</td><td class="tg-0pky">Aggregate reading difficulty score of the text.<b>The higher the score, the more difficult readability</b></td><td class="tg-0pky">11.2332</td><td class="tg-0pky">13.6816</td><td class="tg-0pky">77.0</td><td class="tg-0pky">0.0</td></tr><tr><td class="tg-0pky">LangkitSyllableCountScore</td><td class="tg-0pky">Counts the total number of syllables in the text. <b>The higher the score, the more syllables there are.</b></td><td class="tg-0pky">815.3852</td><td class="tg-0pky">2299853.7272</td><td class="tg-0pky">43237</td><td class="tg-0pky">32</td></tr><tr><td class="tg-0pky">LangkitLexiconCountScore</td><td class="tg-0pky">Counts the total number of words in the text. <b>The higher the score, the more words there are.</b></td><td class="tg-0pky">524.178</td><td class="tg-0pky">1061058.5875</td><td class="tg-0pky">33033</td><td class="tg-0pky">23</td></tr><tr><td class="tg-0pky">LangkitSentenceCountScore</td><td class="tg-0pky">Counts the total number of sentences in the text. <b>The higher the score, the more sentences there are.</b></td><td class="tg-0pky">28.9664</td><td class="tg-0pky">3618.2549</td><td class="tg-0pky">2193</td><td class="tg-0pky">1</td></tr><tr><td class="tg-0pky">LangkitCharacterCountScore</td><td class="tg-0pky">Counts the total number of characters in the text. <b>The higher the score, the more characters there are.</b></td><td class="tg-0pky">2610.2462</td><td class="tg-0pky">23580442.8820</td><td class="tg-0pky">139807</td><td class="tg-0pky">118</td></tr><tr><td class="tg-0pky">LangkitLetterCountScore</td><td class="tg-0pky">Counts the total number of letters in the text. <b>The higher the score, the more letters there are.</b></td><td class="tg-0pky">2513.4572</td><td class="tg-0pky">21890120.2030</td><td class="tg-0pky">134507</td><td class="tg-0pky">109</td></tr><tr><td class="tg-0pky">LangkitPolysyllableCountScore</td><td class="tg-0pky">Counts the number of polysyllabic words in the text. <b>The higher the score, the more polysyllabic words there are.</b></td><td class="tg-0pky">78.8834</td><td class="tg-0pky">18918.1990</td><td class="tg-0pky">3261</td><td class="tg-0pky">0</td></tr><tr><td class="tg-0pky">LangkitMonosyllableCountScore</td><td class="tg-0pky">Counts the number of monosyllabic words, which are usually related to the text&#39;s simplicity. <b>The higher the score, the more monosyllabic words there are.</b></td><td class="tg-0pky">334.6674</td><td class="tg-0pky">503285.5160</td><td class="tg-0pky">25133</td><td class="tg-0pky">13</td></tr><tr><td class="tg-0pky">LangkitDifficultWordsScore</td><td class="tg-0pky">Counts the number of difficult words in the text. <b>The higher the score, the more difficult words there are.</b></td><td class="tg-0pky">93.4112</td><td class="tg-0pky">14401.2789</td><td class="tg-0pky">2366</td><td class="tg-0pky">4</td></tr><tr><td class="tg-0pky" rowspan="1">TextbookScorer</td><td class="tg-0pky">TextbookScore</td><td class="tg-0pky">Tests whether the text meets textbook standards. <b>The higher the score, the closer the text is to an ideal textbook.</b></td><td class="tg-0pky">0.9255</td><td class="tg-0pky">0.1779</td><td class="tg-0pky">1.9867</td><td class="tg-0pky">0.0001</td></tr><tr><td class="tg-0pky" rowspan="1">FineWebEduScorer</td><td class="tg-0pky">FineWebEduScore</td><td class="tg-0pky">Measures the educational value of the text. <b>The higher the score, the greater the educational value.</b></td><td class="tg-0pky">1.1901</td><td class="tg-0pky">0.4924</td><td class="tg-0pky">4.6827</td><td class="tg-0pky">-0.6319</td></tr><tr><td class="tg-0pky" rowspan="1">DebertaV3Scorer</td><td class="tg-0pky">DebertaV3Score</td><td class="tg-0pky">Text evaluation using the DebertaV3 model. <b>Quality scores are classified as high, medium, or low.</b></td><td class="tg-0pky">Medium: 3180 times</td><td class="tg-0pky">-</td><td class="tg-0pky">High: 1412 times</td><td class="tg-0pky">Low: 408 times</td></tr><tr><td class="tg-0pky" rowspan="1">PerplexityScorer</td><td class="tg-0pky">PerplexityScore</td><td class="tg-0pky">Measures the perplexity of the text. <b>The higher the score, the greater the model&#39;s perplexity.</b></td><td class="tg-0pky">564.3942</td><td class="tg-0pky">165893.5542</td><td class="tg-0pky">8271.0</td><td class="tg-0pky">13.9</td></tr><tr><td class="tg-0pky" rowspan="4">QuratingScorer</td><td class="tg-0pky">QuratingWritingStyleScore</td><td class="tg-0pky">Evaluates the quality of the text&#39;s writing style. <b>The higher the score, the better the writing style.</b></td><td class="tg-0pky">0.6453</td><td class="tg-0pky">6.7949</td><td class="tg-0pky">8.375</td><td class="tg-0pky">-7.3474</td></tr><tr><td class="tg-0pky">QuratingRequiredExpertiseScore</td><td class="tg-0pky">Measures the level of expertise required for the text. <b>The higher the score, the more expertise is required.</b></td><td class="tg-0pky">-0.4661</td><td class="tg-0pky">7.0458</td><td class="tg-0pky">9.0</td><td class="tg-0pky">-8.25</td></tr><tr><td class="tg-0pky">QuratingFactsAndTriviaScore</td><td class="tg-0pky">Tests whether the text contains facts and trivia. <b>The higher the score, the more facts and trivia the text contains.</b></td><td class="tg-0pky">0.1889</td><td class="tg-0pky">4.5678</td><td class="tg-0pky">7.4688</td><td class="tg-0pky">-6.0993</td></tr><tr><td class="tg-0pky">QuratingEducationalValueScore</td><td class="tg-0pky">Measures the educational value of the text. <b>The higher the score, the greater the educational value.</b></td><td class="tg-0pky">1.2946</td><td class="tg-0pky">11.2196</td><td class="tg-0pky">11.5625</td><td class="tg-0pky">-8.7843</td></tr><tr><td class="tg-0pky" rowspan="1">InstagScorer</td><td class="tg-0pky">InstagScore</td><td class="tg-0pky">Evaluates the content diversity by returning the number of tags. <b>The higher the score, the greater the content diversity.</b></td><td class="tg-0pky">2.304</td><td class="tg-0pky">2.9396</td><td class="tg-0pky">11</td><td class="tg-0pky">1</td></tr><tr><td class="tg-0pky" rowspan="1">SuperfilteringScorer</td><td class="tg-0pky">SuperfilteringScore</td><td class="tg-0pky">Evaluates the instruction-following difficulty using the Superfiltering method. <b>The higher the score, the more difficult it is to follow the instructions.</b></td><td class="tg-0pky">1.3223</td><td class="tg-0pky">836.0302</td><td class="tg-0pky">1978.6534</td><td class="tg-0pky">0.0011</td></tr><tr><td class="tg-0pky" rowspan="1">DeitaQualityScorer</td><td class="tg-0pky">DeitaQualityScore</td><td class="tg-0pky">Instruction quality evaluation based on the Llama model. <b>The higher the score, the better the quality of the instructions.</b></td><td class="tg-0pky">3.5629</td><td class="tg-0pky">0.9247</td><td class="tg-0pky">5.5309</td><td class="tg-0pky">1.0840</td></tr><tr><td class="tg-0pky" rowspan="1">DeitaComplexityScorer</td><td class="tg-0pky">DeitaComplexityScore</td><td class="tg-0pky">Instruction complexity evaluation based on the Llama model. <b>The higher the score, the greater the complexity of the instructions.</b></td><td class="tg-0pky">1.4936</td><td class="tg-0pky">0.2086</td><td class="tg-0pky">3.3207</td><td class="tg-0pky">1.0001</td></tr><tr><td class="tg-0pky" rowspan="3">VendiScorer</td><td class="tg-0pky">N-grams_VendiScore</td><td class="tg-0pky">Evaluates text diversity based on N-grams embeddings. <b>The higher the score, the greater the dataset diversity.</b></td><td class="tg-0pky">1832.96</td><td class="tg-0pky">-</td><td class="tg-0pky">-</td><td class="tg-0pky">-</td></tr><tr><td class="tg-0pky">BERT_VendiScore</td><td class="tg-0pky">Evaluates text diversity based on BERT embeddings. <b>The higher the score, the greater the dataset diversity.</b></td><td class="tg-0pky">1.83</td><td class="tg-0pky">-</td><td class="tg-0pky">-</td><td class="tg-0pky">-</td></tr><tr><td class="tg-0pky">SimCSE_VendiScore</td><td class="tg-0pky">Evaluates text diversity based on SimCSE embeddings. <b>The higher the score, the greater the dataset diversity.</b></td><td class="tg-0pky">68.94</td><td class="tg-0pky">-</td><td class="tg-0pky">-</td><td class="tg-0pky">-</td></tr><tr><td class="tg-0pky" rowspan="1">Task2VecScorer</td><td class="tg-0pky">Task2VecScore</td><td class="tg-0pky">Evaluates dataset diversity using Task2Vec diversity coefficient. <b>The higher the score, the greater the dataset diversity.</b></td><td class="tg-0pky">0.0673</td><td class="tg-0pky">-</td><td class="tg-0pky">-</td><td class="tg-0pky">-</td></tr><tr><td class="tg-0pky" rowspan="1">AlpagasusScorer</td><td class="tg-0pky">AlpagasusScore</td><td class="tg-0pky">Evaluates instruction quality using ChatGPT. <b>The higher the score, the better the quality of the instructions.</b></td><td class="tg-0pky">4.172</td><td class="tg-0pky">0.2164</td><td class="tg-0pky">5.0</td><td class="tg-0pky">2.0</td></tr><tr><td class="tg-0pky" rowspan="1">TreeinstructScorer</td><td class="tg-0pky">TreeinstructScore</td><td class="tg-0pky">Uses ChatGPT to evaluate the semantic complexity of instructions. <b>The higher the score, the greater the semantic complexity of the instruction.</b></td><td class="tg-0pky">6.494</td><td class="tg-0pky">9.7540</td><td class="tg-0pky">63.0</td><td class="tg-0pky">0.0</td></tr><tr><td class="tg-0pky" rowspan="1">PresidioScorer</td><td class="tg-0pky">PresidioScore</td><td class="tg-0pky">Uses Presidio to evaluate the number of PII (Personally Identifiable Information) instances. <b>The higher the score, the more PII information is present in the text.</b></td><td class="tg-0pky">21.4008</td><td class="tg-0pky">2915.3542</td><td class="tg-0pky">1786.0</td><td class="tg-0pky">0.0</td></tr><tr><td class="tg-0pky" rowspan="1">RMScorer</td><td class="tg-0pky">RMScore</td><td class="tg-0pky">Uses a reward model based on human values to evaluate the quality of SFT (Supervised Fine-Tuning) data. <b>The higher the score, the better the data quality.</b></td><td class="tg-0pky">3.1537</td><td class="tg-0pky">9.9461</td><td class="tg-0pky">8.6803</td><td class="tg-0pky">-4.9680</td></tr></tbody></table><h2 id="detailed-operator-descriptions" tabindex="-1"><a class="header-anchor" href="#detailed-operator-descriptions"><span>Detailed Operator Descriptions</span></a></h2><h3 id="apicaller-operators" tabindex="-1"><a class="header-anchor" href="#apicaller-operators"><span>APIcaller Operators</span></a></h3><h4 id="_1-alpagasusscorer✨" tabindex="-1"><a class="header-anchor" href="#_1-alpagasusscorer✨"><span>1. AlpagasusScorer✨</span></a></h4><p><strong>Function Description:</strong> This operator evaluates instruction quality using GPT, returning a quality score where higher scores indicate better instruction quality. Based on the Alpagasus method, it is specifically designed for evaluating the quality and effectiveness of instruction data.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>llm_serving</code>: Large language model interface object to use (required, must implement LLMServingABC interface)</li><li><code>dimension</code>: Evaluation dimension (default: &quot;quality&quot;)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_instruction_key</code>: Field name for instruction</li><li><code>input_input_key</code>: Field name for input text</li><li><code>input_output_key</code>: Field name for output text</li><li><code>output_key</code>: Field name for output score (default: &quot;AlpagasusScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>GPT-based intelligent quality assessment</li><li>Support for custom evaluation dimensions</li><li>Automatic score parsing</li><li>Suitable for instruction fine-tuning data quality evaluation</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">alpagasus_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> AlpagasusScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">api_llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          dimension</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">quality</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">          )</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">alpagasus_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          input_input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">input</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          input_output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">output</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">AlpagasusScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">          )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-perspectivescorer✨" tabindex="-1"><a class="header-anchor" href="#_2-perspectivescorer✨"><span>2. PerspectiveScorer✨</span></a></h4><p><strong>Function Description:</strong> This operator assesses text toxicity using PerspectiveAPI, returning toxicity probability where higher scores indicate more toxicity. Specifically designed for detecting harmful content and inappropriate language in text.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>serving</code>: Perspective API serving object</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Field name for input text</li><li><code>output_key</code>: Field name for output score (default: &quot;PerspectiveScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Google Perspective API-based toxicity detection</li><li>Automatic text length limit handling (max 20KB)</li><li>Batch processing support</li><li>Returns 0-1 range toxicity probability</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">perspective_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> PerspectiveScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">perspective_api_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">perspective_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PerspectiveScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">          )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-treeinstructscore✨" tabindex="-1"><a class="header-anchor" href="#_3-treeinstructscore✨"><span>3. TreeinstructScore✨</span></a></h4><p><strong>Function Description:</strong> This operator measures instruction complexity by generating syntax tree node counts; more nodes indicate higher complexity. Based on syntax analysis methods to evaluate the structural complexity of instructions.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li>No special parameters required</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_instruction_key</code>: Field name for instruction</li><li><code>output_key</code>: Field name for output score (default: &quot;TreeinstructScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Syntax tree analysis-based complexity evaluation</li><li>Automatic instruction syntax structure parsing</li><li>Quantified instruction complexity</li><li>Suitable for instruction diversity analysis</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">treeinstruct_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> TreeinstructScore</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">treeinstruct_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">TreeinstructScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">          )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="diversity-operators" tabindex="-1"><a class="header-anchor" href="#diversity-operators"><span>Diversity Operators</span></a></h3><h4 id="_1-task2vecscorer✨" tabindex="-1"><a class="header-anchor" href="#_1-task2vecscorer✨"><span>1. Task2VecScorer✨</span></a></h4><p><strong>Function Description:</strong> This operator assesses dataset diversity using the Task2Vec method; higher scores indicate greater diversity. Based on task embedding methods to calculate similarity and diversity between datasets.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li>No special parameters required</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Field name for input text</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Task2Vec method-based diversity evaluation</li><li>Confidence interval calculation</li><li>Suitable for task-level diversity analysis</li><li>Open source first algorithm</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">task2vec_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Task2VecScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">result </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> task2vec_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">          )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-vendiscorer" tabindex="-1"><a class="header-anchor" href="#_2-vendiscorer"><span>2. VendiScorer</span></a></h4><p><strong>Function Description:</strong> This operator assesses dataset diversity using VendiScore with embeddings from BERT and SimCSE models. VendiScore is a diversity measurement method based on kernel matrix eigenvalues that can effectively evaluate dataset richness and coverage.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Field name for input text</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Multi-model evaluation: Uses BERT, SimCSE, and N-gram methods</li><li>Embedding-based diversity calculation</li><li>Suitable for entire dataset diversity evaluation</li><li>GPU acceleration support</li></ul><p><strong>Output Format:</strong></p><ul><li><code>N-gramsVendiScore</code>: N-gram-based diversity score</li><li><code>BERTVendiScore</code>: BERT-based diversity score</li><li><code>SimCSEVendiScore</code>: SimCSE-based diversity score</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">vendi_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> VendiScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">result </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> vendi_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">          )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="models-operators" tabindex="-1"><a class="header-anchor" href="#models-operators"><span>Models Operators</span></a></h3><h4 id="_1-debertav3scorer✨" tabindex="-1"><a class="header-anchor" href="#_1-debertav3scorer✨"><span>1. DebertaV3Scorer✨</span></a></h4><p><strong>Function Description:</strong> A text quality classifier based on Nvidia Deberta V3 model for evaluating text quality. This operator classifies text into three quality levels: High, Medium, and Low, suitable for large-scale text quality filtering.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>batch_size</code>: Batch processing size (default: 32)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Input text field name</li><li><code>output_key</code>: Output score field name (default: &quot;DebertaV3Score&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>High-precision text quality classification based on DeBERTa-v3-large model</li><li>Three-level quality classification: High, Medium, Low</li><li>Supports batch processing for improved efficiency</li><li>GPU-accelerated computation</li><li>Suitable for quality evaluation of various text types</li></ul><p><strong>Evaluation Dimension:</strong> Content Accuracy &amp; Effectiveness</p><p><strong>Data Type:</strong> Text</p><p><strong>Value Range:</strong> {Low, Medium, High}</p><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">deberta_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DebertaV3Scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">32</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">deberta_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DebertaV3Score</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-finewebeduscorer✨" tabindex="-1"><a class="header-anchor" href="#_2-finewebeduscorer✨"><span>2. FineWebEduScorer✨</span></a></h4><p><strong>Function Description:</strong> A classifier for evaluating the educational value of text, trained on the FineWeb-Edu dataset. This operator can identify educationally meaningful text content, providing support for educational resource filtering and curriculum content development.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>batch_size</code>: Batch processing size (default: 32)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Input text field name</li><li><code>output_key</code>: Output score field name (default: &quot;FineWebEduScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Specifically designed for educational value assessment</li><li>Trained on large-scale educational text data</li><li>Fine-grained scoring from 0-5</li><li>Supports multilingual text evaluation</li><li>Efficient batch processing capability</li></ul><p><strong>Evaluation Dimension:</strong> Educational Value</p><p><strong>Data Type:</strong> Text</p><p><strong>Value Range:</strong> [0, 5]</p><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">fineweb_edu_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> FineWebEduScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">32</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">fineweb_edu_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">FineWebEduScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-instagscorer✨" tabindex="-1"><a class="header-anchor" href="#_3-instagscorer✨"><span>3. InstagScorer✨</span></a></h4><p><strong>Function Description:</strong> Evaluates instruction content diversity by returning the number of tags; more tags indicate greater content diversity. This operator is based on the InsTagger model and can automatically identify different topics and task types involved in instructions.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>batch_size</code>: Batch processing size (default: 16)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_instruction_key</code>: Instruction field name (default: &quot;instruction&quot;)</li><li><code>output_key</code>: Output score field name (default: &quot;InstagScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Multi-label classification based on InsTagger model</li><li>Automatically identifies task types and topics involved in instructions</li><li>Quantifies instruction content diversity</li><li>Supports fine-grained analysis of complex instructions</li><li>Suitable for diversity evaluation of instruction datasets</li></ul><p><strong>Evaluation Dimension:</strong> Diversity &amp; Complexity</p><p><strong>Data Type:</strong> Instruction</p><p><strong>Value Range:</strong> Positive integer (number of tags)</p><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">instag_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> InstagScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">16</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">instag_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">InstagScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-perplexityscorer" tabindex="-1"><a class="header-anchor" href="#_4-perplexityscorer"><span>4. PerplexityScorer</span></a></h4><p><strong>Function Description:</strong> Calculates text perplexity based on Kenlm model; lower perplexity indicates higher fluency and understandability. This operator uses statistical language models to evaluate text naturalness and language quality.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>model_path</code>: Kenlm model path (default: preset model path)</li><li><code>language</code>: Language type (default: &quot;en&quot;)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Input text field name</li><li><code>output_key</code>: Output score field name (default: &quot;PerplexityScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Based on n-gram statistical language model</li><li>Fast text perplexity calculation</li><li>Supports multiple languages</li><li>Low memory usage with high computational efficiency</li><li>Suitable for large-scale text fluency evaluation</li></ul><p><strong>Evaluation Dimension:</strong> Fluency &amp; Understandability</p><p><strong>Data Type:</strong> Text</p><p><strong>Value Range:</strong> Positive number (perplexity value, lower is better)</p><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">perplexity_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> PerplexityScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./models/kenlm_model.bin</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    language</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">en</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">perplexity_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PerplexityScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-quratingscorer✨" tabindex="-1"><a class="header-anchor" href="#_5-quratingscorer✨"><span>5. QuratingScorer✨</span></a></h4><p><strong>Function Description:</strong> Evaluates text quality through the Qurating model; higher scores indicate better quality. This operator is based on a multi-dimensional evaluation framework and can assess text quality from multiple perspectives including writing style, educational value, and required expertise.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>batch_size</code>: Batch processing size (default: 16)</li><li><code>max_length</code>: Maximum sequence length (default: 512)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Input text field name</li><li><code>output_key</code>: Output score field name (default: &quot;QuratingScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Multi-dimensional text quality evaluation</li><li>Trained on large-scale high-quality text</li><li>Supports long text processing</li><li>Provides fine-grained quality scoring</li><li>Suitable for academic and professional text evaluation</li></ul><p><strong>Evaluation Dimension:</strong> Content Accuracy &amp; Effectiveness, Educational Value</p><p><strong>Data Type:</strong> Text</p><p><strong>Value Range:</strong> Continuous values (higher is better)</p><p><strong>Output Metrics:</strong></p><ul><li><code>QuratingWritingStyleScore</code>: Writing style score</li><li><code>QuratingEducationalValueScore</code>: Educational value score</li><li><code>QuratingRequiredExpertiseScore</code>: Required expertise score</li><li><code>QuratingFactsAndTriviaScore</code>: Facts and knowledge score</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">qurating_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> QuratingScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">16</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    max_length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">512</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">qurating_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">QuratingScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-pairqualscorer🚀" tabindex="-1"><a class="header-anchor" href="#_6-pairqualscorer🚀"><span>6. PairQualScorer🚀</span></a></h4><p><strong>Function Description:</strong> Evaluates text quality through the PairQual model based on bge model, supporting Chinese and English, trained with GPT pairwise comparison scoring. This is an independently innovative operator specifically optimized for Chinese and English text quality evaluation.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>batch_size</code>: Batch processing size (default: 32)</li><li><code>language</code>: Language type (default: &quot;auto&quot;, auto-detection)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Input text field name</li><li><code>output_key</code>: Output score field name (default: &quot;PairQualScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Bilingual quality evaluation based on BGE model</li><li>Trained with GPT pairwise comparison data</li><li>Supports Chinese and English evaluation</li><li>Independent innovation algorithm</li><li>High-precision quality judgment capability</li></ul><p><strong>Evaluation Dimension:</strong> Educational Value</p><p><strong>Data Type:</strong> Text</p><p><strong>Value Range:</strong> Continuous values (higher is better)</p><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pairqual_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> PairQualScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">32</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    language</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">auto</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pairqual_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PairQualScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-presidioscorer✨" tabindex="-1"><a class="header-anchor" href="#_7-presidioscorer✨"><span>7. PresidioScorer✨</span></a></h4><p><strong>Function Description:</strong> Uses Microsoft Presidio model to identify personally identifiable information (PII) in text such as credit card numbers, names, locations, etc. The scorer returns the count of PII information for evaluating text privacy safety.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>language</code>: Language type (default: &quot;en&quot;)</li><li><code>entities</code>: List of entity types to detect (default: [&quot;PERSON&quot;, &quot;EMAIL_ADDRESS&quot;, &quot;PHONE_NUMBER&quot;, &quot;CREDIT_CARD&quot;, &quot;LOCATION&quot;])</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Input text field name</li><li><code>output_key</code>: Output score field name (default: &quot;PresidioScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>PII detection based on Microsoft Presidio</li><li>Supports recognition of multiple personal information types</li><li>Customizable entity types for detection</li><li>Supports multilingual text processing</li><li>High-precision privacy information identification</li></ul><p><strong>Evaluation Dimension:</strong> Safety</p><p><strong>Data Type:</strong> Text</p><p><strong>Value Range:</strong> Non-negative integer (number of PII entities)</p><p><strong>Detected PII Types:</strong></p><ul><li>PERSON: Person names</li><li>EMAIL_ADDRESS: Email addresses</li><li>PHONE_NUMBER: Phone numbers</li><li>CREDIT_CARD: Credit card numbers</li><li>LOCATION: Geographic locations</li><li>Other configurable types</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">presidio_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> PresidioScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    language</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">en</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    entities</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PERSON</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EMAIL_ADDRESS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PHONE_NUMBER</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CREDIT_CARD</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">LOCATION</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">presidio_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PresidioScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-superfilteringscorer✨" tabindex="-1"><a class="header-anchor" href="#_8-superfilteringscorer✨"><span>8. SuperfilteringScorer✨</span></a></h4><p><strong>Function Description:</strong> Uses Superfiltering method to evaluate instruction following difficulty; higher scores indicate instructions are harder to follow. This operator is based on instruction complexity analysis and helps identify instructions requiring advanced reasoning capabilities.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>batch_size</code>: Batch processing size (default: 16)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_instruction_key</code>: Instruction field name (default: &quot;instruction&quot;)</li><li><code>input_output_key</code>: Output field name (default: &quot;output&quot;)</li><li><code>output_key</code>: Output score field name (default: &quot;SuperfilteringScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Difficulty evaluation based on Superfiltering method</li><li>Evaluates instruction following complexity</li><li>Identifies instructions requiring advanced reasoning</li><li>Supports instruction-response pair analysis</li><li>Suitable for instruction data quality filtering</li></ul><p><strong>Evaluation Dimension:</strong> Fluency &amp; Understandability</p><p><strong>Data Type:</strong> Instruction</p><p><strong>Value Range:</strong> Continuous values (higher indicates harder to follow)</p><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">superfiltering_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> SuperfilteringScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">16</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">superfiltering_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">output</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">SuperfilteringScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-textbookscorer✨" tabindex="-1"><a class="header-anchor" href="#_9-textbookscorer✨"><span>9. TextbookScorer✨</span></a></h4><p><strong>Function Description:</strong> A textbook quality classifier based on FastText classifier for evaluating educational value of text. This operator is specifically designed for educational content and can identify text with textbook quality.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>model_path</code>: FastText model path (default: preset model path)</li><li><code>threshold</code>: Classification threshold (default: 0.5)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Input text field name</li><li><code>output_key</code>: Output score field name (default: &quot;TextbookScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Efficient text classification based on FastText</li><li>Specifically optimized for educational content</li><li>Fast inference speed</li><li>Low memory usage</li><li>Suitable for large-scale educational text filtering</li></ul><p><strong>Evaluation Dimension:</strong> Educational Value</p><p><strong>Data Type:</strong> Text</p><p><strong>Value Range:</strong> [0, 2]</p><p><strong>Classification Standards:</strong></p><ul><li>0: Non-educational content</li><li>1: General educational content</li><li>2: High-quality educational content</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">textbook_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> TextbookScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./models/textbook_classifier.bin</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    threshold</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.5</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">textbook_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">TextbookScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_10-deitaqualityscorer✨" tabindex="-1"><a class="header-anchor" href="#_10-deitaqualityscorer✨"><span>10. DeitaQualityScorer✨</span></a></h4><p><strong>Function Description:</strong> A Llama-based Deita instruction quality evaluator; higher scores indicate better instruction quality. This operator evaluates instruction quality by generating 1-6 quality scores, particularly suitable for quality filtering of instruction fine-tuning data.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>max_length</code>: Maximum sequence length (default: 512)</li><li><code>batch_size</code>: Batch processing size (default: 8)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_instruction_key</code>: Instruction text field name (default: &quot;instruction&quot;)</li><li><code>input_output_key</code>: Output text field name (default: &quot;output&quot;)</li><li><code>output_key</code>: Output score field name (default: &quot;DeitaQualityScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Professional quality evaluation based on Llama model</li><li>Fine-grained 1-6 scoring</li><li>Uses softmax probability distribution to calculate final score</li><li>Supports batch processing and GPU acceleration</li><li>Specifically optimized for instruction-response pairs</li></ul><p><strong>Evaluation Dimension:</strong> Content Accuracy &amp; Effectiveness</p><p><strong>Data Type:</strong> Instruction</p><p><strong>Value Range:</strong> [1, 6]</p><p><strong>Scoring Standards:</strong></p><ul><li>1 point: Very poor quality, unclear instructions or irrelevant responses</li><li>2 points: Poor quality, obvious problems exist</li><li>3 points: Average quality, basically usable but with room for improvement</li><li>4 points: Good quality, clear instructions and appropriate responses</li><li>5 points: Very good quality, high-quality instruction-response pairs</li><li>6 points: Excellent quality, perfect instruction-response pairs</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">deita_quality_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DeitaQualityScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    max_length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">512</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">8</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">deita_quality_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">output</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DeitaQualityScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_11-deitacomplexityscorer✨" tabindex="-1"><a class="header-anchor" href="#_11-deitacomplexityscorer✨"><span>11. DeitaComplexityScorer✨</span></a></h4><p><strong>Function Description:</strong> A Llama-based Deita instruction complexity evaluator; higher scores indicate greater instruction complexity. This operator evaluates the cognitive complexity and execution difficulty of instructions, helping identify challenging instructions.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>max_length</code>: Maximum sequence length (default: 512)</li><li><code>batch_size</code>: Batch processing size (default: 8)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_instruction_key</code>: Instruction text field name (default: &quot;instruction&quot;)</li><li><code>input_output_key</code>: Output text field name (default: &quot;output&quot;)</li><li><code>output_key</code>: Output score field name (default: &quot;DeitaComplexityScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Complexity evaluation based on Llama model</li><li>1-6 complexity scoring</li><li>Evaluates cognitive load of instructions</li><li>Identifies instructions requiring advanced reasoning</li><li>Supports difficulty stratification of instruction datasets</li></ul><p><strong>Evaluation Dimension:</strong> Diversity &amp; Complexity</p><p><strong>Data Type:</strong> Instruction</p><p><strong>Value Range:</strong> [1, 6]</p><p><strong>Complexity Standards:</strong></p><ul><li>1 point: Very simple, basic operations</li><li>2 points: Simple, direct tasks</li><li>3 points: Medium, requires some thinking</li><li>4 points: Complex, requires multi-step reasoning</li><li>5 points: Very complex, requires advanced reasoning</li><li>6 points: Extremely complex, requires professional knowledge</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">deita_complexity_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DeitaComplexityScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    max_length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">512</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">8</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">deita_complexity_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">output</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DeitaComplexityScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-rmscorer✨" tabindex="-1"><a class="header-anchor" href="#_12-rmscorer✨"><span>12. RMScorer✨</span></a></h4><p><strong>Function Description:</strong> A quality scorer based on human value judgment reward model reward-model-deberta-v3-large-v2. Higher scores represent better quality. This operator uses reward models trained with human feedback to evaluate text quality.</p><p><strong>Input Parameters:</strong></p><ul><li><code>__init__()</code><ul><li><code>device</code>: Computing device (default: &quot;cuda&quot;)</li><li><code>model_cache_dir</code>: Model cache directory (default: &quot;./dataflow_cache&quot;)</li><li><code>batch_size</code>: Batch processing size (default: 16)</li><li><code>max_length</code>: Maximum sequence length (default: 512)</li></ul></li><li><code>run()</code><ul><li><code>storage</code>: Storage interface object</li><li><code>input_instruction_key</code>: Instruction field name (default: &quot;instruction&quot;)</li><li><code>input_output_key</code>: Output field name (default: &quot;output&quot;)</li><li><code>output_key</code>: Output score field name (default: &quot;RMScore&quot;)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Reward model trained with human feedback</li><li>Reflects human value judgments and preferences</li><li>Suitable for dialogue and instruction response evaluation</li><li>High-precision quality judgment</li><li>Supports multi-turn dialogue evaluation</li></ul><p><strong>Evaluation Dimension:</strong> Fluency &amp; Understandability</p><p><strong>Data Type:</strong> Instruction</p><p><strong>Value Range:</strong> Continuous values (higher indicates better quality)</p><p><strong>Evaluation Standards:</strong></p><ul><li>Considers response helpfulness</li><li>Evaluates content safety</li><li>Judges answer accuracy</li><li>Measures expression clarity</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rm_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> RMScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cuda</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_cache_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow_cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    batch_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">16</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    max_length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">512</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rm_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">output</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">RMScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="statistics-operators" tabindex="-1"><a class="header-anchor" href="#statistics-operators"><span>Statistics Operators</span></a></h3><h4 id="_1-lexicaldiversityscorer-✨" tabindex="-1"><a class="header-anchor" href="#_1-lexicaldiversityscorer-✨"><span>1. LexicalDiversityScorer ✨</span></a></h4><p><strong>Function Description:</strong> This operator computes the lexical diversity of a text using the MTLD (Measure of Textual Lexical Diversity) and HDD (Hypergeometric Distribution Diversity) methods to evaluate the richness of vocabulary and expressive variety.</p><p><strong>Input Parameters:</strong></p><ul><li><p><code>__init__()</code></p><ul><li>No special parameters required.</li></ul></li><li><p><code>run()</code></p><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Field name of the input text</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li><strong>MTLD method</strong>: Measures how many words are needed to maintain a specified TTR (type-token ratio) threshold, assessing lexical diversity.</li><li><strong>HDD method</strong>: Estimates lexical richness based on sampling using hypergeometric distribution.</li><li>Automatically handles punctuation and casing.</li><li>Adaptively evaluates texts of varying lengths.</li></ul><p><strong>Input Requirements:</strong></p><ul><li>MTLD evaluation: Requires texts longer than 50 words.</li><li>HDD evaluation: Text length should be between 50 and 1000 words.</li></ul><p><strong>Output Format:</strong></p><ul><li><code>LexicalDiversityMTLDScore</code>: MTLD diversity score (higher = better diversity)</li><li><code>LexicalDiversityHD-DScore</code>: HDD diversity score (higher = better diversity)</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">lexical_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> LexicalDiversityScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">lexical_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_2-langkitscorer" tabindex="-1"><a class="header-anchor" href="#_2-langkitscorer"><span>2. LangkitScorer</span></a></h4><p><strong>Function Description:</strong> This operator uses the Langkit toolkit to compute statistical information about a text, such as word count, sentence count, and syllable count, aiding in the assessment of structural complexity and readability.</p><p><strong>Input Parameters:</strong></p><ul><li><p><code>__init__()</code></p><ul><li>No special parameters required.</li></ul></li><li><p><code>run()</code></p><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Field name of the input text</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Comprehensive statistical analysis of text</li><li>Multi-dimensional readability evaluation</li><li>Includes Flesch readability score</li><li>Automated readability metrics computation</li></ul><p><strong>Output Metrics:</strong></p><ul><li>Structure: Sentence count, character count, letter count, word count</li><li>Complexity: Syllable count, number of polysyllabic/monosyllabic/difficult words</li><li>Readability: Flesch Reading Ease score, Automated Readability Index, overall reading difficulty</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">langkit_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> LangkitScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">langkit_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_3-ngramscorer" tabindex="-1"><a class="header-anchor" href="#_3-ngramscorer"><span>3. NgramScorer</span></a></h4><p><strong>Function Description:</strong> This operator calculates the repetition ratio of n-grams within a text, measuring how repetitive it is. Higher scores indicate lower n-gram repetition.</p><p><strong>Input Parameters:</strong></p><ul><li><p><code>__init__()</code></p><ul><li><code>n</code>: Length of the n-gram (default: 3)</li></ul></li><li><p><code>run()</code></p><ul><li><code>storage</code>: Storage interface object</li><li><code>input_key</code>: Field name of the input text</li><li><code>output_key</code>: Field name for the output score (default: <code>&quot;NgramScore&quot;</code>)</li></ul></li></ul><p><strong>Key Features:</strong></p><ul><li>Repetition analysis based on n-grams</li><li>Configurable n-gram length</li><li>Quantifies textual diversity</li><li>High computational efficiency</li></ul><p><strong>Usage Example:</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ngram_scorer </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> NgramScorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">n</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ngram_scorer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">NgramScore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="generated-text-evaluation" tabindex="-1"><a class="header-anchor" href="#generated-text-evaluation"><span>Generated text evaluation</span></a></h2><p>Dataflow integrates three methods for evaluating the quality of generated text, used to evaluate the similarity between generated text and reference text.</p><table class="tg"><thead><tr><th class="tg-0pky">Scorer Name</th><th class="tg-0pky">Description</th><th class="tg-0pky">Value Range</th><th class="tg-0pky">Description</th></tr></thead><tbody><tr><td class="tg-0pky">BLEU Scorer</td><td class="tg-0pky">Calculates precision based on n-gram matching by comparing n-grams in generated and reference texts</td><td class="tg-0pky">[0, 1]</td><td class="tg-0pky">Higher values indicate greater match between generated and reference texts</td></tr><tr><td class="tg-0pky">CIDEr Scorer</td><td class="tg-0pky">Uses TF-IDF weighted n-gram statistics to compare similarity between generated and reference descriptions</td><td class="tg-0pky">[0, 1]</td><td class="tg-0pky">Higher values indicate stronger content consistency between generated and reference texts</td></tr><tr><td class="tg-0pky">BertScore</td><td class="tg-0pky">Computes similarity of word embeddings between generated and reference texts using BERT</td><td class="tg-0pky">[0, 1]</td><td class="tg-0pky">Higher values indicate stronger semantic similarity between generated and reference texts</td></tr></tbody></table></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-23f6ad98 data-v-fda6bbae><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-fda6bbae><span class="contributors-label" data-v-fda6bbae>Contributors: </span><span class="contributors-info" data-v-fda6bbae><!--[--><!--[--><span class="contributor" data-v-fda6bbae>Sunnyhaze</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" data-v-fda6bbae>Ma, Xiaochen</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" data-v-fda6bbae>Hao Liang</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" data-v-fda6bbae>zzy1127</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" data-v-fda6bbae>wongzhenhao</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-fda6bbae><div class="pager" data-v-fda6bbae><a class="vp-link link pager-link prev" href="/DataFlow-Doc/en/guide/e6kz1s79/" data-v-fda6bbae><!--[--><span class="desc" data-v-fda6bbae>Previous page</span><span class="title" data-v-fda6bbae>Function Calling Data Synthesis Pipeline</span><!--]--><!----></a></div><div class="pager" data-v-fda6bbae><a class="vp-link link pager-link next" href="/DataFlow-Doc/en/guide/text_process_operators/" data-v-fda6bbae><!--[--><span class="desc" data-v-fda6bbae>Next page</span><span class="title" data-v-fda6bbae>General Data Processing Operators</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-d90a7a26 data-v-bcf8d9a6><span class="percent" data-allow-mismatch data-v-bcf8d9a6>0%</span><span class="show icon vpi-back-to-top" data-v-bcf8d9a6></span><svg aria-hidden="true" data-v-bcf8d9a6><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-bcf8d9a6></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-d90a7a26 data-v-400675cf><!--[--><div class="container" data-v-400675cf><p class="message" data-v-400675cf>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/DataFlow-Doc/assets/app-BqDkFDvD.js" defer></script></body></html>