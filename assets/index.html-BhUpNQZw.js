import{_ as s,c as i,b as e,o as a}from"./app-BqDkFDvD.js";const l={};function n(d,t){return a(),i("div",null,t[0]||(t[0]=[e(`<h2 id="📘-概述" tabindex="-1"><a class="header-anchor" href="#📘-概述"><span>📘 概述</span></a></h2><p><code>Text2QASampleEvaluator</code> 是一个用于评估生成的问答（QA）对质量的算子。它会根据多个维度（如问题质量、答案对齐度、答案可验证性和下游价值）对输入的QA对进行打分，并提供具体的反馈。该算子通过调用大语言模型（LLM）来自动执行评估任务。</p><h2 id="init-函数" tabindex="-1"><a class="header-anchor" href="#init-函数"><span>__init__函数</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> __init__</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> LLMServingABC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="init参数说明" tabindex="-1"><a class="header-anchor" href="#init参数说明"><span>init参数说明</span></a></h3><table><thead><tr><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>llm_serving</strong></td><td style="text-align:left;">LLMServingABC</td><td style="text-align:left;">必需</td><td style="text-align:left;">大语言模型服务实例，用于执行评估。</td></tr></tbody></table><h3 id="prompt模板说明" tabindex="-1"><a class="header-anchor" href="#prompt模板说明"><span>Prompt模板说明</span></a></h3><h2 id="run函数" tabindex="-1"><a class="header-anchor" href="#run函数"><span>run函数</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DataFlowStorage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    input_question_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_question</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    input_answer_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_answer</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_question_quality_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">question_quality_grades</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_question_quality_feedback_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">question_quality_feedbacks</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_answer_alignment_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">answer_alignment_grades</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_answer_alignment_feedback_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">answer_alignment_feedbacks</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_answer_verifiability_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">answer_verifiability_grades</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_answer_verifiability_feedback_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">answer_verifiability_feedbacks</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_downstream_value_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">downstream_value_grades</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_downstream_value_feedback_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">downstream_value_feedbacks</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="参数" tabindex="-1"><a class="header-anchor" href="#参数"><span>参数</span></a></h4><table><thead><tr><th style="text-align:left;">名称</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>storage</strong></td><td style="text-align:left;">DataFlowStorage</td><td style="text-align:left;">必需</td><td style="text-align:left;">数据流存储实例，负责读取与写入数据。</td></tr><tr><td style="text-align:left;"><strong>input_question_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;generated_question&quot;</td><td style="text-align:left;">输入列名，包含生成的问题。</td></tr><tr><td style="text-align:left;"><strong>input_answer_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;generated_answer&quot;</td><td style="text-align:left;">输入列名，包含生成的答案。</td></tr><tr><td style="text-align:left;"><strong>output_question_quality_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;question_quality_grades&quot;</td><td style="text-align:left;">输出列名，用于存储问题质量评分。</td></tr><tr><td style="text-align:left;"><strong>output_question_quality_feedback_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;question_quality_feedbacks&quot;</td><td style="text-align:left;">输出列名，用于存储问题质量反馈。</td></tr><tr><td style="text-align:left;"><strong>output_answer_alignment_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;answer_alignment_grades&quot;</td><td style="text-align:left;">输出列名，用于存储答案对齐度评分。</td></tr><tr><td style="text-align:left;"><strong>output_answer_alignment_feedback_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;answer_alignment_feedbacks&quot;</td><td style="text-align:left;">输出列名，用于存储答案对齐度反馈。</td></tr><tr><td style="text-align:left;"><strong>output_answer_verifiability_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;answer_verifiability_grades&quot;</td><td style="text-align:left;">输出列名，用于存储答案可验证性评分。</td></tr><tr><td style="text-align:left;"><strong>output_answer_verifiability_feedback_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;answer_verifiability_feedbacks&quot;</td><td style="text-align:left;">输出列名，用于存储答案可验证性反馈。</td></tr><tr><td style="text-align:left;"><strong>output_downstream_value_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;downstream_value_grades&quot;</td><td style="text-align:left;">输出列名，用于存储下游价值评分。</td></tr><tr><td style="text-align:left;"><strong>output_downstream_value_feedback_key</strong></td><td style="text-align:left;">str</td><td style="text-align:left;">&quot;downstream_value_feedbacks&quot;</td><td style="text-align:left;">输出列名，用于存储下游价值反馈。</td></tr></tbody></table><h2 id="🧠-示例用法" tabindex="-1"><a class="header-anchor" href="#🧠-示例用法"><span>🧠 示例用法</span></a></h2><h4 id="🧾-默认输出格式-output-format" tabindex="-1"><a class="header-anchor" href="#🧾-默认输出格式-output-format"><span>🧾 默认输出格式（Output Format）</span></a></h4><p>该算子会保留输入数据的所有原始字段，并添加以下评分和反馈字段。</p><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>generated_question</code></td><td style="text-align:left;">str</td><td style="text-align:left;">输入的问题文本（使用默认 <code>input_question_key</code>）。</td></tr><tr><td style="text-align:left;"><code>generated_answer</code></td><td style="text-align:left;">str</td><td style="text-align:left;">输入的答案文本（使用默认 <code>input_answer_key</code>）。</td></tr><tr><td style="text-align:left;"><code>question_quality_grades</code></td><td style="text-align:left;">float</td><td style="text-align:left;">问题质量的评分。</td></tr><tr><td style="text-align:left;"><code>question_quality_feedbacks</code></td><td style="text-align:left;">str</td><td style="text-align:left;">关于问题质量的具体反馈。</td></tr><tr><td style="text-align:left;"><code>answer_alignment_grades</code></td><td style="text-align:left;">float</td><td style="text-align:left;">答案与问题对齐度的评分。</td></tr><tr><td style="text-align:left;"><code>answer_alignment_feedbacks</code></td><td style="text-align:left;">str</td><td style="text-align:left;">关于答案与问题对齐度的具体反馈。</td></tr><tr><td style="text-align:left;"><code>answer_verifiability_grades</code></td><td style="text-align:left;">float</td><td style="text-align:left;">答案可验证性的评分。</td></tr><tr><td style="text-align:left;"><code>answer_verifiability_feedbacks</code></td><td style="text-align:left;">str</td><td style="text-align:left;">关于答案可验证性的具体反馈。</td></tr><tr><td style="text-align:left;"><code>downstream_value_grades</code></td><td style="text-align:left;">float</td><td style="text-align:left;">QA对的下游应用价值评分。</td></tr><tr><td style="text-align:left;"><code>downstream_value_feedbacks</code></td><td style="text-align:left;">str</td><td style="text-align:left;">关于QA对下游应用价值的具体反馈。</td></tr></tbody></table>`,15)]))}const r=s(l,[["render",n]]),k=JSON.parse('{"path":"/zh/api/operators/core_text/eval/text2qasampleevaluator/","title":"Text2QASampleEvaluator","lang":"zh-CN","frontmatter":{"title":"Text2QASampleEvaluator","createTime":"2025/10/09 17:09:04","permalink":"/zh/api/operators/core_text/eval/text2qasampleevaluator/"},"readingTime":{"minutes":1.9,"words":571},"git":{"createdTime":1760001305000,"updatedTime":1760001305000,"contributors":[{"name":"Hao Liang","username":"","email":"hao.liang@stu.pku.edu.cn","commits":1,"avatar":"https://gravatar.com/avatar/105bae3e8661728b9f2f5440992b04f5f28459b66a049d09b52213ce1438f6bc?d=retro"}]},"filePathRelative":"zh/notes/api/operators/core_text/eval/Text2QASampleEvaluator.md","headers":[]}');export{r as comp,k as data};
