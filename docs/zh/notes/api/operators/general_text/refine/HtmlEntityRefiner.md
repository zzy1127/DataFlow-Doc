---
title: HtmlEntityRefiner
createTime: 2025/10/09 17:09:04
permalink: /zh/api/operators/general_text/refine/htmlentityrefiner/
---

å¥½çš„ï¼Œè¿™æ˜¯æ ¹æ®æ‚¨æä¾›çš„ä»£ç å’Œæ¨¡æ¿ç”Ÿæˆçš„ `HtmlEntityRefiner` ç®—å­çš„ä¸­æ–‡æ•™ç¨‹ Markdown ä»£ç ã€‚

---

## ğŸ“˜ æ¦‚è¿°

[HtmlEntityRefiner](https://github.com/OpenDCAI/DataFlow/blob/main/dataflow/operators/refine/html_entity_refiner.py) æ˜¯ä¸€ä¸ªæ–‡æœ¬æ¸…ç†ç®—å­ï¼Œç”¨äºå»é™¤æ–‡æœ¬ä¸­çš„ HTML å®ä½“ï¼Œå¦‚ `&nbsp;`, `&lt;` ç­‰ã€‚å®ƒä¸ä»…èƒ½å¤„ç†æ ‡å‡†çš„ HTML å®ä½“ï¼Œè¿˜èƒ½è¯†åˆ«å¹¶ç§»é™¤å¤šç§å˜ä½“å½¢å¼ï¼ˆä¾‹å¦‚ä½¿ç”¨å…¨è§’ç¬¦å· `ï¼†` æˆ–ä¸­æ–‡åˆ†å· `ï¼›`ï¼‰ã€‚è¯¥ç®—å­æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰éœ€è¦ç§»é™¤çš„ HTML å®ä½“åˆ—è¡¨ï¼Œæä¾›äº†çµæ´»çš„æ–‡æœ¬é¢„å¤„ç†èƒ½åŠ›ã€‚

## `__init__`å‡½æ•°

```python
def __init__(self, html_entities: list = [
            "nbsp", "lt", "gt", "amp", "quot", "apos", "hellip", "ndash", "mdash", 
            "lsquo", "rsquo", "ldquo", "rdquo"
        ]):
```

### initå‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| **html_entities** | list | `["nbsp", "lt", "gt", ...]` | ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦ä¸²æ˜¯éœ€è¦è¢«ç§»é™¤çš„ HTML å®ä½“çš„åç§°ï¼ˆä¸å« `&` å’Œ `;`ï¼‰ã€‚ |

### Promptæ¨¡æ¿è¯´æ˜

| Prompt æ¨¡æ¿åç§° | ä¸»è¦ç”¨é€” | é€‚ç”¨åœºæ™¯ | ç‰¹ç‚¹è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| | | | |

## `run`å‡½æ•°

```python
def run(self, storage: DataFlowStorage, input_key: str):
```

#### å‚æ•°

| åç§° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| **storage** | DataFlowStorage | å¿…éœ€ | æ•°æ®æµå­˜å‚¨å®ä¾‹ï¼Œè´Ÿè´£è¯»å–ä¸å†™å…¥æ•°æ®ã€‚ |
| **input_key** | str | å¿…éœ€ | è¾“å…¥åˆ—çš„åç§°ï¼Œè¯¥åˆ—åŒ…å«éœ€è¦æ¸…ç†HTMLå®ä½“çš„æ–‡æœ¬ã€‚ |

## ğŸ§  ç¤ºä¾‹ç”¨æ³•

```python

```

#### ğŸ§¾ é»˜è®¤è¾“å‡ºæ ¼å¼ï¼ˆOutput Formatï¼‰

è¯¥ç®—å­ä¼šå°±åœ°ä¿®æ”¹è¾“å…¥çš„ DataFrameï¼Œå°†æ¸…ç†åçš„æ–‡æœ¬å†™å›åˆ° `input_key` æŒ‡å®šçš„åˆ—ä¸­ã€‚

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| {input_key} | str | ç»è¿‡ HTML å®ä½“ç§»é™¤å¤„ç†åçš„æ–‡æœ¬ã€‚ |
| ... | ... | å…¶ä»–è¾“å…¥å­—æ®µä¿æŒä¸å˜ã€‚ |

**ç¤ºä¾‹è¾“å…¥ï¼š**
*(å‡è®¾ `input_key` ä¸º `"content"`) *

```json
{
"content":"è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ–‡æœ¬&nbsp;ï¼Œå®ƒåŒ…å«äº†&lt;ç‰¹æ®Š&gt;å®ä½“ï¼†amp;ç¬¦å·ï¼›"
}
```

**ç¤ºä¾‹è¾“å‡ºï¼š**

```json
{
"content":"è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ–‡æœ¬ ï¼Œå®ƒåŒ…å«äº†ç‰¹æ®Šå®ä½“ç¬¦å·"
}
```
