---
title: SuperfilteringFilter
createTime: 2025/10/09 17:09:04
permalink: /zh/api/operators/text_sft/filter/superfilteringfilter/
---

å¥½çš„ï¼Œè¿™æ˜¯æ ¹æ®æ‚¨æä¾›çš„ä»£ç å’Œæ¨¡æ¿ç”Ÿæˆçš„ `SuperfilteringFilter` ç®—å­çš„æ•™ç¨‹ Markdownã€‚

***

## ğŸ“˜ æ¦‚è¿°

`SuperfilteringFilter` æ˜¯ä¸€ä¸ªæ•°æ®è¿‡æ»¤ç®—å­ï¼Œå®ƒä½¿ç”¨åŸºäº GPT-2 æ¨¡å‹çš„ Superfiltering è¯„åˆ†å™¨æ¥è¯„ä¼°æŒ‡ä»¤æ•°æ®çš„è´¨é‡ï¼Œå¹¶è¿‡æ»¤æ‰ä½åˆ†æ ·æœ¬ã€‚è¯¥è¯„åˆ†å™¨é€šè¿‡è®¡ç®—å›°æƒ‘åº¦æ¯”å€¼æ¥è¯„ä¼°æŒ‡ä»¤è·Ÿéšçš„éš¾åº¦ï¼Œæ¯”å€¼è¶Šä½è¡¨ç¤ºæŒ‡ä»¤è¶Šå®¹æ˜“è¢«æ¨¡å‹ç†è§£å’Œæ‰§è¡Œã€‚è¯¥ç®—å­é€‚ç”¨äºç­›é€‰é€‚åˆç‰¹å®šæ¨¡å‹èƒ½åŠ›çš„æŒ‡ä»¤æ•°æ®ï¼Œä»è€Œæé«˜æ¨¡å‹è®­ç»ƒçš„æ•ˆç‡å’Œæ•ˆæœã€‚

## `__init__`å‡½æ•°

```python
def __init__(self, min_score=0.0, max_score=1.0, device='cuda', model_cache_dir='./dataflow_cache', max_length=512)
```

| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| :------------------ | :--- | :----------------- | :----------------- |
| **min_score** | float | 0.0 | ä¿ç•™æ ·æœ¬çš„æœ€å°åˆ†æ•°é˜ˆå€¼ã€‚ |
| **max_score** | float | 1.0 | ä¿ç•™æ ·æœ¬çš„æœ€å¤§åˆ†æ•°é˜ˆå€¼ã€‚ |
| **device** | str | 'cuda' | æ¨¡å‹è¿è¡Œè®¾å¤‡ã€‚ |
| **model_cache_dir** | str | './dataflow_cache' | æ¨¡å‹ç¼“å­˜ç›®å½•ã€‚ |
| **max_length** | int | 512 | æ–‡æœ¬æœ€å¤§é•¿åº¦ã€‚ |

### Promptæ¨¡æ¿è¯´æ˜

| Prompt æ¨¡æ¿åç§° | ä¸»è¦ç”¨é€” | é€‚ç”¨åœºæ™¯ | ç‰¹ç‚¹è¯´æ˜ |
| -------------------------------- | ------------- | ----------------------- | ----------------------------------------------------- |
| | | | |

## `run`å‡½æ•°

```python
def run(self, storage: DataFlowStorage, input_instruction_key: str = 'instruction', input_input_key: str = 'input', input_output_key: str = 'output', output_key: str = "SuperfilteringScore")
```

#### å‚æ•°

| åç§° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| :---------------------- | :---------------- | :-------------------- | :----------------------- |
| **storage** | DataFlowStorage | å¿…éœ€ | æ•°æ®æµå­˜å‚¨å®ä¾‹ï¼Œè´Ÿè´£è¯»å–ä¸å†™å…¥æ•°æ®ã€‚ |
| **input_instruction_key** | str | "instruction" | è¾“å…¥çš„æŒ‡ä»¤å­—æ®µåã€‚ |
| **input_input_key** | str | "input" | è¾“å…¥çš„ä¸Šä¸‹æ–‡æˆ–è¾“å…¥å†…å®¹å­—æ®µåã€‚ |
| **input_output_key** | str | "output" | è¾“å…¥çš„æœŸæœ›è¾“å‡ºå­—æ®µåã€‚ |
| **output_key** | str | "SuperfilteringScore" | è¾“å‡ºåˆ†æ•°ç»“æœçš„å­—æ®µåã€‚ |

## ğŸ§  ç¤ºä¾‹ç”¨æ³•

```python

```

#### ğŸ§¾ é»˜è®¤è¾“å‡ºæ ¼å¼ï¼ˆOutput Formatï¼‰

ç®—å­æ‰§è¡Œåï¼Œä¼šåœ¨åŸå§‹æ•°æ®åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªåˆ†æ•°**output_key**ï¼ˆé»˜è®¤ä¸º `SuperfilteringScore`ï¼‰å­—æ®µï¼Œå¹¶ä»…ä¿ç•™åˆ†æ•°åœ¨ `[min_score, max_score]` åŒºé—´å†…çš„æ•°æ®è¡Œã€‚

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
| :-------------------- | :---- | :----------------------------- |
| instruction | str | è¾“å…¥çš„æŒ‡ä»¤æ–‡æœ¬ã€‚ |
| input | str | è¾“å…¥çš„ä¸Šä¸‹æ–‡æˆ–é—®é¢˜è¡¥å……ä¿¡æ¯ã€‚ |
| output | str | è¾“å…¥çš„æœŸæœ›ç­”æ¡ˆã€‚ |
| SuperfilteringScore | float | æ¨¡å‹ç”Ÿæˆçš„æŒ‡ä»¤è·Ÿéšéš¾åº¦åˆ†æ•°ã€‚ |

ç¤ºä¾‹è¾“å…¥ï¼š
```json
{
"instruction":"å°†ä»¥ä¸‹å¥å­ä»è‹±è¯­ç¿»è¯‘æˆæ³•è¯­ã€‚",
"input":"Hello, how are you?",
"output":"Bonjour, comment Ã§a va?"
}
```
ç¤ºä¾‹è¾“å‡º (å‡è®¾è¯¥æ ·æœ¬é€šè¿‡è¿‡æ»¤)ï¼š
```json
{
"instruction":"å°†ä»¥ä¸‹å¥å­ä»è‹±è¯­ç¿»è¯‘æˆæ³•è¯­ã€‚",
"input":"Hello, how are you?",
"output":"Bonjour, comment Ã§a va?",
"SuperfilteringScore": 0.85
}
```
